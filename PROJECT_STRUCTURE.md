# Project Structure

## ğŸ“ Directory Layout

```
pumb.fum/
â”œâ”€â”€ src/                          # Cairo 1 source files
â”‚   â”œâ”€â”€ lib.cairo                # Main library file (exports all modules)
â”‚   â”œâ”€â”€ memecoin_token.cairo     # ERC20 token with mint/burn
â”‚   â”œâ”€â”€ protocol_config.cairo    # Global protocol configuration
â”‚   â”œâ”€â”€ bonding_curve_pool.cairo # Core bonding curve logic
â”‚   â”œâ”€â”€ pump_factory.cairo       # Launch registry
â”‚   â””â”€â”€ liquidity_migration.cairo # DEX migration stub
â”‚
â”œâ”€â”€ scripts/                      # TypeScript deployment & interaction scripts
â”‚   â”œâ”€â”€ deploy.ts                # Deploy core contracts
â”‚   â”œâ”€â”€ create_launch.ts         # Create new memecoin launch
â”‚   â””â”€â”€ interact.ts               # Query contract state
â”‚
â”œâ”€â”€ tests/                        # Test files (to be implemented)
â”‚   â””â”€â”€ test_memecoin_token.cairo # Example test structure
â”‚
â”œâ”€â”€ deployments/                  # Deployment addresses & data
â”‚   â”œâ”€â”€ .gitkeep                 # Keep directory in git
â”‚   â”œâ”€â”€ sepolia.json             # Core contract deployments (generated)
â”‚   â””â”€â”€ launches.json             # Launch registry (generated)
â”‚
â”œâ”€â”€ target/                       # Compiled contracts (generated by Scarb)
â”‚   â””â”€â”€ dev/                     # Development build output
â”‚       â”œâ”€â”€ *.sierra.json        # Sierra (intermediate representation)
â”‚       â””â”€â”€ *.casm.json          # CASM (compiled assembly)
â”‚
â”œâ”€â”€ Scarb.toml                   # Scarb project configuration
â”œâ”€â”€ package.json                 # Node.js dependencies & scripts
â”œâ”€â”€ tsconfig.json                # TypeScript configuration
â”œâ”€â”€ .env.example                 # Environment variables template
â”œâ”€â”€ .gitignore                   # Git ignore rules
â”œâ”€â”€ README.md                    # Main documentation
â”œâ”€â”€ SETUP.md                     # Setup guide
â””â”€â”€ PROJECT_STRUCTURE.md         # This file
```

## ğŸ”§ Contract Architecture

### Core Contracts

1. **MemecoinToken** (`src/memecoin_token.cairo`)
   - ERC20-compatible token
   - Mint/burn controlled by minter (BondingCurvePool)
   - Standard transfer/approve functionality

2. **ProtocolConfig** (`src/protocol_config.cairo`)
   - Global protocol settings
   - Fee configuration (basis points + receiver)
   - Curve parameter limits
   - Owner-controlled updates

3. **BondingCurvePool** (`src/bonding_curve_pool.cairo`)
   - Linear bonding curve: `price = base_price + slope * tokens_sold`
   - Buy/sell functionality
   - Protocol fee deduction
   - Migration status tracking

4. **PumpFactory** (`src/pump_factory.cairo`)
   - Launch registry
   - Stores launch metadata
   - Query all launches
   - Migration status tracking

5. **LiquidityMigration** (`src/liquidity_migration.cairo`)
   - Stub for future DEX migration
   - Marks pools as migrated
   - Owner-controlled

### Contract Interactions

```
User
  â”‚
  â”œâ”€â†’ PumpFactory.register_launch()
  â”‚     â”‚
  â”‚     â”œâ”€â†’ Deploys MemecoinToken
  â”‚     â””â”€â†’ Deploys BondingCurvePool
  â”‚
  â””â”€â†’ BondingCurvePool.buy()
        â”‚
        â”œâ”€â†’ IERC20.transfer_from() (quote token)
        â”œâ”€â†’ IProtocolConfig.get_fee_config()
        â””â”€â†’ MemecoinToken.mint()
```

## ğŸ“ Scripts

### Deployment Scripts

- **`deploy.ts`**: Deploys core protocol contracts
  - ProtocolConfig
  - PumpFactory
  - LiquidityMigration

- **`create_launch.ts`**: Creates a new memecoin launch
  - Deploys MemecoinToken
  - Deploys BondingCurvePool
  - Links them together
  - Registers in PumpFactory

- **`interact.ts`**: Query contract state
  - Factory queries
  - Pool state queries
  - Token info queries

## ğŸ”„ Workflow

### Initial Setup
1. Install Scarb and Node.js dependencies
2. Configure `.env` file
3. Build contracts: `scarb build`
4. Deploy core contracts: `npm run deploy`

### Creating a Launch
1. Run: `npm run create-launch <name> <symbol> <basePrice> <slope> <maxSupply>`
2. Script deploys token and pool
3. Launch registered in factory
4. Addresses saved to `deployments/launches.json`

### Interacting with Contracts
1. Query factory: `npm run interact factory total_launches`
2. Get launch info: `npm run interact factory get_launch 0`
3. Check pool price: `npm run interact pool get_current_price <address>`

## ğŸ§ª Testing

Test structure is in place but tests need to be implemented using StarkNet's test framework.

## ğŸ“¦ Dependencies

### Cairo (Scarb)
- `starknet >= 2.3.0` - StarkNet standard library

### Node.js (npm)
- `starknet` - StarkNet.js SDK
- `dotenv` - Environment variable management
- `ts-node` - TypeScript execution
- `typescript` - TypeScript compiler

## ğŸš€ Deployment Flow

1. **Build**: `scarb build` â†’ Generates Sierra and CASM files
2. **Deploy Core**: `npm run deploy` â†’ Deploys protocol contracts
3. **Create Launch**: `npm run create-launch ...` â†’ Deploys per-launch contracts
4. **Interact**: `npm run interact ...` â†’ Query or call contracts

## ğŸ” Security Notes

- Contracts use basic access controls
- Owner functions protected
- Minter role restricted
- Migration functions need proper access control in production

## ğŸ“š Key Files to Understand

1. **`src/bonding_curve_pool.cairo`** - Core business logic
2. **`src/pump_factory.cairo`** - Launch registry
3. **`scripts/create_launch.ts`** - Launch creation flow
4. **`README.md`** - Full documentation

